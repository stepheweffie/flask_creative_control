<!DOCTYPE html>
<html>
  <head>

    <script type="text/javascript">
      // Connect to server and emit messages onclick
      const client = new WebSocket('wss://cc-simple-chat.herokuapp.com:5000');
      client.onopen = function(evt) {
            onOpen(evt)
         };

      const chat = document.getElementById("chat"),
              btn= document.getElementById("send");


      // Causes the server to post to the client
      client.addEventListener('message', function(event) {
         console.log('Message from server ', event.data);
         const messages = document.getElementsByTagName('ul')[0],
                 message = document.createElement('li'),
                 content = document.createTextNode(event.data);
         message.appendChild(content);
         messages.appendChild(message);
       document.body.appendChild(messages);
       });
    </script>
  </head>
<body>

<form method="post" id="chat" action="index.html">
  <input type="text"><button type="submit" id="send" onclick="message">Send</button>
</form>

<br>
<br>
<ul>
{% for d in data %}
  {{d |safe}}
  {% endfor %}
</ul>

<script>
function message() {
        client.send('message');
      }
function onOpen(evt) {
         writeToScreen("CONNECTED");
      }
</script>
</body>
</html>
