<!DOCTYPE html>
<html>
  <head>

    <script type="text/javascript">
      // Connect to server and emit messages onclick
      const client = new WebSocket('wss://cc-simple-chat.herokuapp.com:5000');
      const chat = document.getElementById("chat"),
              btn= document.getElementById("send");


      // Causes the server to post to the client
      client.addEventListener('message', function(event) {
         console.log('Message from server ', event.data);
         const messages = document.getElementsByTagName('ul')[0],
                 message = document.createElement('li'),
                 content = document.createTextNode(event.data);
         message.appendChild(content);
         messages.appendChild(message);
       document.body.appendChild(messages);
       });

    </script>
  </head>
<body>

<form method="post" id="chat" action="index.html">
  <input type="text"><button type="submit" id="send">Send</button>
</form>

<br>
<br>
<ul>

</ul>

<script>
btn.onclick = function() {
        client.emit('message', {
          chat: chat.value,
        });
        chat.value = "";
      };
</script>
</body>
</html>
