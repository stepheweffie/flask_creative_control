<!DOCTYPE html>
<html>
  <head>

    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
            integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous">

    </script>

    <script type="text/javascript" charset="utf-8">
      $(document).ready(function(){
        $('form').submit(function(event){
          client.send($('#data').val())
          return false;
        });

      // Connect to server and emit messages onclick
      if ("WebSocket" in window) {

        const client = new WebSocket('wss://' + document.domain + ':5000');
        client.onopen = function(evt) {
            $("#log").append.data
        };
        client.onmessage = function(msg) {
        $("#log").append.("<p>"+msg.data+"</p>")
        };
      }

      const chat = document.getElementById("chat"),
              btn= document.getElementById("send");

    </script>
  </head>
<body>
<div id="log">
<ul>
{% for d in data %}
  {{d |safe}}
  {% endfor %}
</ul>
<br>
<br>
</div>
<form method="POST" id="chat" action="index.html">
  <input type="text" id="data"><button type="submit" id="send" onclick="message">Send</button>
</form>
</body>
</html>
